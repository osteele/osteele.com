---
import { loadProjectsFromTurtle } from "@/data/projects";
import Layout from "@/layouts/Layout.astro";

// Load projects data
const projectsData = await loadProjectsFromTurtle();
const projects = projectsData.projects;

// Filter embroidery projects
const embroideryProjects = projects.filter((project) => project.categories?.includes("machine-embroidery"));
---

<Layout title="Machine Embroidery">
  <main class="min-h-screen">
    <div class="bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800">
      <div class="container py-4">
        <div class="flex items-center gap-2 text-gray-600 dark:text-gray-400">
          <a href="/" class="flex items-center gap-1 hover:text-gray-900 dark:hover:text-gray-100">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
              <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
            <span>Home</span>
          </a>
          <span>/</span>
          <h1 class="text-gray-900 dark:text-gray-100 font-semibold">Machine Embroidery</h1>
        </div>
      </div>
    </div>

    <div class="container py-12">
      <div class="max-w-5xl mx-auto px-4 mb-8">
        <div class="bg-pink-50 dark:bg-pink-900/20 border border-pink-200 dark:border-pink-700 rounded-lg p-4">
          <p class="text-pink-800 dark:text-pink-200">
            Tools and utilities for machine embroidery, including file format conversion, design tools,
            and workflow automation. These projects help bridge the gap between digital design
            and physical embroidery machines.
          </p>
        </div>
      </div>

      <div class="max-w-5xl mx-auto px-4">
        <div class="relative rounded-lg bg-gradient-to-r from-pink-500/10 to-transparent p-6">
          <h2 class="text-3xl font-bold mb-6 bg-gradient-to-r from-pink-500 to-pink-300 bg-clip-text text-transparent">
            Embroidery Projects
          </h2>
          
          <div class="bg-white/50 dark:bg-gray-800/50 rounded-lg backdrop-blur-sm border border-gray-200 dark:border-gray-700">
            <div class="p-6">
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {embroideryProjects.map(project => (
                  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-md transition-shadow duration-200">
                    <div class="p-4">
                      <div class="flex items-start justify-between">
                        <div>
                          <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">
                            {project.name}
                          </h3>
                          {project.dateCreated && (
                            <span class="text-xs text-gray-500 dark:text-gray-400">
                              {new Date(project.dateCreated).getFullYear()}
                            </span>
                          )}
                        </div>
                        {project.primaryLanguage && (
                          <span class="text-xs px-2 py-1 rounded-full bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200">
                            {project.primaryLanguage}
                          </span>
                        )}
                      </div>
                      <p class="mt-2 text-sm text-gray-600 dark:text-gray-300 line-clamp-3">
                        {project.description}
                      </p>
                      <div class="mt-3 flex justify-between items-center">
                        <div class="flex space-x-2">
                          {project.url && (
                            <a
                              href={project.url}
                              target="_blank"
                              rel="noopener noreferrer"
                              class="text-xs text-pink-600 dark:text-pink-400 hover:underline"
                            >
                              Website
                            </a>
                          )}
                          {project.repository && (
                            <a
                              href={project.repository}
                              target="_blank"
                              rel="noopener noreferrer"
                              class="text-xs text-pink-600 dark:text-pink-400 hover:underline"
                            >
                              GitHub
                            </a>
                          )}
                        </div>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>

        <div class="mt-12 p-6 bg-pink-50 dark:bg-pink-900/10 rounded-lg">
          <h2 class="text-2xl font-bold mb-4 text-pink-700 dark:text-pink-300">About Machine Embroidery</h2>
          
          <div class="space-y-4">
            <p class="text-gray-600 dark:text-gray-300">
              Machine embroidery requires specific file formats for different machines and workflow steps.
              These tools help bridge the gap between design software and embroidery machines, allowing
              for easier file conversion and management.
            </p>
            
            <div>
              <h3 class="text-lg font-medium text-pink-600 dark:text-pink-400">Related Links</h3>
              <ul class="mt-2 space-y-1 list-disc list-inside text-gray-600 dark:text-gray-300">
                <li>
                  <a href="https://github.com/topics/machine-embroidery" class="text-pink-600 dark:text-pink-400 hover:underline" target="_blank" rel="noopener noreferrer">
                    GitHub Machine Embroidery Projects
                  </a>
                </li>
                <li>
                  <a href="https://inkstitch.org/" class="text-pink-600 dark:text-pink-400 hover:underline" target="_blank" rel="noopener noreferrer">
                    Ink/Stitch - Inkscape Extension for Machine Embroidery
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</Layout>